!function(a){window.kalturaLoaded=!1,window.youtubeLoaded=!1,window.youtubePlayers=[],a.fn.embedVideo=function(t){a(this).each(function(){var i=a.extend({uiconf:"11601208",wid:"102",kalturaServerURL:"http://cloudvideo.cdn.net.co",maxWidth:a(this).data("max-width")?a(this).data("max-width"):"1200px",video_id:a(this).data("video-id"),video_url:a(this).data("video-url")?a(this).data("video-url"):null,html5:!1,autoplay:!!a(this).data("autoplay")&&a(this).data("autoplay"),thumbnail:!!a(this).data("thumbnail")&&a(this).data("thumbnail"),width:a(this).data("width")?a(this).data("width"):"100%",height:a(this).data("height")?a(this).data("height"):"100%",container:a(this).attr("id"),video_src:a(this).data("source")?a(this).data("source"):"kaltura",extra_params:!!a(this).data("params")&&a(this).data("params"),cc_policy:!!a(this).data("cc-policy")&&a(this).data("cc-policy"),play:'<svg enable-background="new 0 0 34 34" height="34px" id="Layer_1" version="1.1" viewBox="0 0 34 34" width="34px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M17.078,0.25c-9.389,0-17,7.611-17,17s7.611,17,17,17s17-7.611,17-17S26.467,0.25,17.078,0.25z M14,23.963  V10.537l9,6.713L14,23.963z" fill="#FFF"/></svg>',playWidth:"100px",playHeight:"100px",playOpacity:"0.7"},t),e=a(this);if("kaltura"==i.video_src){if(!window.kalturaLoaded){var o=document.createElement("script");o.type="text/javascript",o.src=i.kalturaServerURL+"/p/"+i.wid+"/sp/"+i.wid+"00/embedIframeJs/uiconf_id/"+i.uiconf+"/partner_id/"+i.wid,document.getElementsByTagName("head")[0].appendChild(o),window.kalturaLoaded=!0}}else if("youtube"==i.video_src){if(!window.youtubeLoaded){var d=document.createElement("script");d.src="https://www.youtube.com/iframe_api",document.getElementsByTagName("head")[0].appendChild(d),window.youtubeLoaded=!0}var r=i.video_url.match(/(?:https?:\/{2})?(?:w{3}\.)?youtu(?:be)?\.(?:com|be)(?:\/watch\?v=|\/)([^\s&]+)/);null!=r&&(i.video_id=r[1])}else"vimeo"==i.video_src&&(i.video_id=i.video_url.split(/video\/|https?:\/\/vimeo\.com\//)[1].split(/[?&]/)[0]);var l=Math.floor(11*Math.random()),s=Math.floor(1e6*Math.random()),n=String.fromCharCode(l)+s;n=i.video_src+"_video_"+n;var h=function(){e.css({width:"100%",height:"100%",position:"absolute",top:0,left:0,"background-repeat":"no-repeat","background-size":"cover","background-position":"50% 50%","background-image":'url("'+i.thumbnail+'")'}).attr("id",n)};i.thumbnail?h():"kaltura"==i.video_src?(i.thumbnail="http://cloudvideo.cdn.net.co/p/"+i.wid+"/thumbnail/entry_id/"+i.video_id,h()):"youtube"==i.video_src?(i.thumbnail="https://img.youtube.com/vi/"+i.video_id+"/maxresdefault.jpg",h()):"vimeo"==i.video_src&&a.getJSON("http://www.vimeo.com/api/v2/video/"+i.video_id+".json?callback=?",{format:"json"},function(a){i.thumbnail=a[0].thumbnail_large,h()});var p=a("<div>").attr({style:"width: 100%; margin: 0 auto; max-width: "+i.maxWidth+";",class:"videoContainer"}),c=a("<div>").attr({style:"position: relative; height: 0; width: 100%; padding-bottom: 56.25%;",class:"framePlayerContainer"}),u=a(i.play);u.attr({width:"100%",height:"100%"});var m=a("<a>").css({position:"absolute",cursor:"pointer",width:i.playWidth,height:i.playHeight,top:"50%","margin-top":"-"+i.playHeight+"px",left:"50%","margin-left":"-"+i.playWidth+"px","text-decoration":"none",border:"none","border-radius":"50%","box-shadow":"0 0 100px rgba(0, 0, 0, 0.7)",opacity:i.playOpacity}).append(u);a(this).parent();m.appendTo(a(this)),a(this).wrap(c),c.wrap(p);var v=!i.autoplay||i.autoplay;m.click(function(){var t="iframe",o="";"undefined"!=typeof AMP&&(t="amp-iframe",o='<amp-img layout="fill" src="'+i.thumbnail+'" placeholder></amp-img>'),m.fadeOut(function(){if(a(this).remove(),"kaltura"==i.video_src&&window.kalturaLoaded)kWidget.embed({targetId:n,wid:"_"+i.wid,uiconf_id:i.uiconf,entry_id:i.video_id,flashvars:{autoPlay:v}});else if("youtube"==i.video_src){var d={width:"100%",height:"100%",videoId:i.video_id,events:{onReady:function(a){v&&a.target.playVideo()}}};(i.autoplay||i.cc_policy)&&(d.playerVars={},i.cc_policy&&(d.playerVars.cc_load_policy=i.cc_policy),i.autoplay&&(d.playerVars.autoplay=i.autoplay)),window.youtubePlayers[n]=new YT.Player(n,d)}else if("vimeo"==i.video_src){var r="";i.extra_params&&(r="&"+i.extra_params);var l="<"+t+' src="https://player.vimeo.com/video/'+i.video_id+"?autoplay="+v+r+'" width="'+i.width+'" height="'+i.height+'" sandbox="allow-scripts allow-presentation allow-same-origin" layout="responsive" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen>'+o+"</"+t+">";e.append(l)}})})})}}(jQuery);